<!DOCTYPE html>
<html>
    <head>
	<meta charset="utf-8">
	<title>Find Intersections of Two Circles</title>

	<link href="github.css" rel="stylesheet" />
	
	<script type="text/javascript" src="utmconv.js"></script>
	<script type="text/javascript" src="output.js"></script>
	<script type="text/javascript" src="input.js"></script>

	<script type="text/javascript">
/*jslint browser: true, vars: true, white: true */
/*global UTMConv: false, Output: false, Input: false */

	    var output = new Output("output", "error");

	    function convert_to_meters(dist, unit) {
		"use strict";
		switch (unit.toString().toLowerCase()) {
		    case "m": break;
		    case "km": dist *= 1000; break;
		    case "ft": dist *= 0.3048; break;
		    case "yd": dist *= 0.9144; break;
		    case "mi": dist *= 1609.344; break;
		    default:
			throw new Error("Unknown distance unit '" + unit + "'");
		}
		return dist;
	    }

	    function main() {
		"use strict";
		try {
		    var c1 = Input.get_degmin(
			    "c1latdir",
			    "c1latdeg", "first center latitude degrees",
			    "c1latmin", "first center latitude minutes",
			    "c1lngdir",
			    "c1lngdeg", "first center longitude degrees",
			    "c1lngmin", "first center longitude minutes");

		    var c2 = Input.get_degmin(
			    "c2latdir",
			    "c2latdeg", "second center latitude degrees",
			    "c2latmin", "second center latitude minutes",
			    "c2lngdir",
			    "c2lngdeg", "second center longitude degrees",
			    "c2lngmin", "second center longitude minutes");

		    // First coordinate sets the UTM zone for the other one.
		    var utm1 = c1.to_utm();
		    var utm2 = c2.to_utm(utm1.utmz);

		    var c1radius = Input.get_float("c1radius", "first radius");
		    var c1unit = document.getElementById("c1unit").value;
		    var r1 = convert_to_meters(c1radius, c1unit);

		    var c2radius = Input.get_float("c2radius", "second radius");
		    var c2unit = document.getElementById("c2unit").value;
		    var r2 = convert_to_meters(c2radius, c2unit);

		    var frag = output.newFrag();
		    frag.writeln_head(" ");
		    frag.writeln("c1 center = " + c1);
		    frag.writeln("c1 center = " + utm1);
		    frag.writeln("c1 radius = " + r1 + " meters");
		    frag.writeln(" ");
		    frag.writeln("c2 center = " + c2);
		    frag.writeln("c2 center = " + utm2);
		    frag.writeln("c2 radius = " + r2 + " meters");
		    frag.writeln(" ");

		    output.writeFrag(frag);
		}
		catch (e) {
		    output.errorln("Error: " + e.message);
		}
	    }

	    function init() {
		"use strict";
		output.clearOutput();
		document.getElementById("coords_input_form").onsubmit = function () { main(); return false; };
		document.getElementById("clear_btn").onclick = function () { output.clearOutput(); };
	    }

	    window.onload = init;
	</script>
    </head>

    <body>
	<noscript>
	    <span class="error">
		This web page requires a browser that supports Javascript.<br />Your browser either does not support Javascript or it has Javascript disabled. Please upgrade your browser or enable Javascript support.<br />&nbsp;<br />
	    </span>
	</noscript>

	<h1>Find Intersections of Two Circles</h1>
	<form id="coords_input_form" action="#">
	    Enter center coordinates and radii of two circles:<br />

	    <select id="c1latdir"><option value="N" selected="selected">N</option><option value="S">S</option></select>
	    <input type="text" id="c1latdeg" size="5" value="38" onfocus="select();" />
	    <input type="text" id="c1latmin" size="10" value="38.908" onfocus="select();" />

	    <select id="c1lngdir"><option value="W" selected="selected">W</option><option value="E">E</option></select>
	    <input type="text" id="c1lngdeg" size="5" value="75" onfocus="select();" />
	    <input type="text" id="c1lngmin" size="10" value="36.486" onfocus="select();" />
	    <br />

	    <input type="text" id="c1radius" size="10" value="14000" onfocus="select();" />
	    <select id="c1unit">
		<option value="m" selected="selected">meters</option>
		<option value="km">kilometers</option>
		<option value="ft">feet</option>
		<option value="yd">yards</option>
		<option value="mi">miles</option>
	    </select>
	    <br />
	    <br />

	    <select id="c2latdir"><option value="N" selected="selected">N</option><option value="S">S</option></select>
	    <input type="text" id="c2latdeg" size="5" value="38" onfocus="select();" />
	    <input type="text" id="c2latmin" size="10" value="33.002" onfocus="select();" />

	    <select id="c2lngdir"><option value="W" selected="selected">W</option><option value="E">E</option></select>
	    <input type="text" id="c2lngdeg" size="5" value="75" onfocus="select();" />
	    <input type="text" id="c2lngmin" size="10" value="34.644" onfocus="select();" />
	    <br />

	    <input type="text" id="c2radius" size="10" value="15000" onfocus="select();" />
	    <select id="c2unit">
		<option value="m" selected="selected">meters</option>
		<option value="km">kilometers</option>
		<option value="ft">feet</option>
		<option value="yd">yards</option>
		<option value="mi">miles</option>
	    </select>
	    <br />
	    <br />

	    <input type="submit" value="Find intersections" />&nbsp;

	    <input type="button" id="clear_btn" value="Clear results" />
	</form>

	<hr />
	<div id="output"></div>
    </body>
</html>
<!-- vim:set tw=0: -->
